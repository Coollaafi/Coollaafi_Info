<!-- Template for PROJECT REPORT of CapstoneDesign 2024-2H, initially written by khyoo -->
<!-- 본 파일은 2024년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | WOT(왓): 개인화된 AI를 통해, 날씨에 맞는 맞춤형 옷을 추천해주는 소셜 네트워크 서비스
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 12-쿨라피 |
| (3) 팀 구성원 | 최하늬(2176392) : 리더, AI 개발   <br> 변유진(2171018) : 팀원 , 백엔드 개발   <br> 노수진(2071022) : 팀원 , 프론트엔드 개발			 |
| (4) 팀 지도교수 | 심재형 교수님 |
| (5) 팀 멘토 | 진현영 / 주임연구원 / 어센트코리아 |
| (6) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | Grounded-SAM, Inpaint Anything, 협업필터링 추천시스템 |
| (7) 과제 내용 요약 | 날씨에 맞는 옷을 고르기 어려워하는 20대 여성들을 위한 날씨와 패션을 결합한 소셜 네트워크 서비스이다. 사용자의 OOTD 사진 기반으로, 사용자의 체질(ex. 추위를 많이 탐)을 고려한 AI의 옷 추천 기능을 제공한다. 또한 가장 친한 친구 20명과 소통할 수 있는 폐쇄형 커뮤니티 기능을 제공한다. 매일 OOTD 이미지와 콜라주화된 이미지, 날짜, 날씨, 옷에 대한 코멘트를 부담없이 공유하고, 친구들의 OOTD를 참고할 수 있다.  |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | <h3>[페르소나 - 여대생 최예림(24)]</h3>- 추위를 많이 탐<br>-매일 아침 날씨를 확인하고 옷을 입음<br>-어떤 옷을 입을지 고민이 될 때 에브리타임 날씨 게시판을 애용함<br>-Locket(폐쇄형 SNS)을 매일 사용함<br><br>위와 같이 WOT 이용자 페르소나를 정했으며<br>=> 결과적으로, <b>추위나 더위를 많이 타고, 패션과 SNS에 관심이 많은 20대 여성</b>을 WOT의 타겟으로 지정했다.<br><h3>[설문조사 - 대상: WOT의 타겟]</h3>![설문조사](https://github.com/user-attachments/assets/874ad8f0-7d2a-447c-ae5b-ed67779a30b0)<br>위는 가장 중요도가 높은 2가지의 질문의 답변이다. 다음 결과를 통해, 과반수가 넘는 사람들이 <b>날씨에 기반하여 옷을 입으며, 선택한 옷을 후회한 경험이 있다</b>는 사실을 확인하였다.<br><br>또한, 사람들이 날씨를 추천받기 위해 사용하는 <b>'날씨 게시판'</b>의 장단점을 조사를 통해 확인하였다.<br><br><b>장점:</b><br>1. 체감온도와 옷차림을 함께 알 수 있어 좋았다. <br>2. 학교 사람들과 공유하는 경우, 공통적으로 가지고 있는 옷(ex.과잠) 기준으로 알 수 있어 좋았다.<br><b>단점:</b><br>1. 글쓴이가 추위를 잘 타거나 더위를 잘 타는 등의 개인차가 크다<br>2. 올라오는 옷들과 가지고 있는 옷이 달라 정확한 날씨 파악이 어렵다.<br>3. 지역이 다른 경우가 있다. <br><br>위와 같이 답변하였으며, 이를 참고하여 서비스의 기능을 추가하였다. <br><br> => 결과적으로, <b>날씨에 맞는 옷을 고르기 어려운 20대 여성을 위한 개인화된 옷 추천 소셜 네트워크 서비스, WOT</b>을 기획하였다.|
| (2) 기존연구와의 비교 | <b>AI를 통한 옷 추천 기능</b>이 있는 서비스와 비교했다.<br><br> <b>'유저의 새인적 성향을 고려한 옷을 추천 받을 수 있나요?', '유저가 가지고 있는 옷 중에서 추천 받을 수 있나요?', 'OOTD를 공유할 수 있나요?', '콜라주 형태로 옷을 추천 받을 수 있나요?'</b>, 총 4가지 파트로 비교했으며, <br>기획한 서비스, <b>WOT</b>과 두개의 유사서비스, <b>'ACloset'</b>, <b>'코쿤'</b>을 비교했다. <br>![비교](https://github.com/user-attachments/assets/a8cd6744-48cc-4399-adf6-f24c415ab030)<br><br>=> 'ACloset'과 '코쿤' 모두 WOT과 같이 OOTD를 공유할 수 있었지만, <b>친한 사람들과 편하게 OOTD를 올릴 수는 없었다.</b><br>=> 'ACloset'은 유저가 가지고 있는 옷 중에서 옷을 추천받을 수 있었지만, <b>유저의 체질을 고려해주지는 않았다.</b>|
| (3) 제안 내용 | 유저의 개인적 성향을 고려하지 못하고, 가지고 있는 옷에서 추천 받을 수 없는 기존 서비스의 한계점을 해결하기 위해 두 문제점을 해결한 AI 모델을 구현해 <b>AI의 today's 옷 추천 기능</b>을 고안했다.<br>우리 서비스는 사용자가 가지고 있는 옷을 기반으로 추천하기에 옷의 재질과 두께를 잘 참고하여 사용자가 현실적인 도움을 비교적 쉽게 받을 수 있다. 또한 사용자가 과거에 입었던 ootd 사진을 통해 학습시킨 개인만의 모델을 통해, 사용자의 날씨 성향이 자연스레 반영되어 추천된다. <br><br>또한 콜라주 형태로 옷을 추천 받을 수 없는 기존 서비스의 한계점을 해결하고, 가장 친한 친구들과 부담없이 가볍게 옷을 공유하는 우리 서비스의 지향점을 가져가기 위해 <b>폐쇄형 sns 커뮤니티 기능</b>을 고안했다. <br>가장 친한 소수의 친구들이 일주일동안 어떤 옷을 입었고 추웠는지 더웠는지 작성한 후기를 커뮤니티로 공유함으로써 날씨에 맞는 옷 결정에 도움을 받을 수 있다. |
| (4) 기대효과 및 의의 | <b>1. 이용자들이 날씨에 맞지 않는 옷을 고를 확률을 줄여주는 서비스</b><br>개인화된 AI 모델로 각 유저의 '체질에 맞는 옷을 추천'해주어, 이용자들이 매일 날씨에 맞는 옷을 고르지 못해 실패할 확률을 줄여준다. 또한, 이용자들에게 옷을 고르는 재미를 더해준다.<br><br><b>2. 누구나 부담없이 자신의 패션을 공유할 수 있는 서비스</b><br>공유에 부담이 비교적 적은 '폐쇄형 SNS'와 '패션'을 합쳐 누구나 부담없이 옷을 공유할 수 있도록 한다.<br><br><b>3. 친구들의 옷을 참고할 수 있는 소통창구</b><br>친구들의 옷과 그 옷을 입고 추웠는지/더웠는지/적당한지 참고할 수 있는 소통 창구가 될 수 있도록 한다. |
| (5) 주요 기능 리스트 |<h3>[기능1) AI의 today's 옷 추천]</h3>유저의 개인적 성향을 고려하지 못하고, 가지고 있는 옷에서 추천 받을 수 없는 기존 서비스의 한계점을 해결하기 위해 두 문제점을 해결한 AI 모델을 구현했다.<br><br><b>개인 맞춤형 추천</b><br>유저마다 모델을 학습시키기에 추위를 많이 타는지, 더위를 많이타는지 등 개인의 성향이 반영된 옷이 추천된다.<br><br><b>이미지 분석 기반</b><br>사진 속에서 유저가 입은 옷을 인식하고 분류하기에 현실적인 추천이 가능하다.<br><br><b>사용자 피드백 반영</b><br>추천 결과에 대해 사용자 피드백을 받으면 이를 모델에 반영하여 추천 정확성이 계속해서 개선된다.<br><br><h3>[기능2) 룩북 올리기 및 이미지 콜라주화]</h3>불특정 다수에게 공개되는 공간에 사진을 올리기 불편했던 이들을 위해 폐쇄형 sns 커뮤니티 기능 및 콜라주 기능을 구현했다.<br><br>- OOTD이미지와 착용한 옷 종류를 골라 '룩북 만들기' 버튼을 클릭하면, AI의 image segmentation 모델을 통해 OOTD 속 옷이 segmentation 된다.<br>- 유저는 WOT LOOK BOOK 상자에서 콜라주화된 OOTD 이미지를 확인할 수 있으며, '룩북 저장하기' 버튼을 통해 콜라주화된 OOTD 이미지를 앨범에 저장할 수 있다.<br>- 합쳐진 이미지는 S3에 저장되며, 유저가 '룩북으로 공유하기' 버튼 클릭 시, 게시글로 올라갈 뿐 아니라 AI 학습에 사용된다. <br><br><h3>[기능3) 룩북 구경 기능]</h3>- 오늘로부터 일주일 내에 올린 친구들의 게시글을 확인할 수 있다.<br>- '내 위치' 클릭 시, 내가 있는 지역 내에서 올린 게시글만 보여지며, '전체 위치' 클릭 시, 모든 게시글이 보여진다.<br>- 게시글에는 게시글을 올린 날짜, 당시의 날씨, 옷에 대한 코멘트가 보여지며, 게시글을 누르면 해당 게시글의 상세 페이지로 넘어간다.<br>- 상세 페이지에서 '좋아요'와 '댓글'을 남길 수 있다.<br><br><h3>[기능4) 달력형 룩북 아카이브]</h3>- 유저는 올렸던 게시글을 홈페이지에서 달력 형태로 볼 수 있다.<br>- 유저가 가입한 시점부터 오늘까지의 달력을 볼 수 있으며, 게시글을 올렸던 날은 그 날의 OOTD 콜라주 이미지로 채워져있고, 올리지 않았던 날은 비어있다.<br>- 달력 내 OOTD 이미지 클릭 시, 해당 게시글의 상세 페이지로 넘어간다.|

<br>
 
# Project-Design & Inplementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | <h3>[E-R 다이어그램]</h3>![WOT](https://github.com/user-attachments/assets/2858c743-bf0a-47b5-9a70-42eed5d1e8d3) <br>- 전체 데이터베이스 구조도를 나타내는 ERD로, 실제로는 MySQL로 구현하였다.<br>- 데이터베이스는 게시물을 관리하는 Post, PostPrefer, Comment, Reply 엔티티와, 친구 목록을 관리하는 Member, FriendRequest, Friendship 엔티티, 사진을 관리하는 Photo 엔티티로 구성되어 있다.<br><br><h3>[UI 설계 모델(Figma)]</h3><b>1. 회원가입/로그인 화면, 홈 화면, 사진 업로드 화면</b><br><br>![git1](https://github.com/user-attachments/assets/0eaf637b-5d75-4c6a-8dc7-09b9962f6184)<br><b>[회원가입/로그인 화면]</b><br>서비스에 처음 접속하면, 로그인 화면이 나오게 된다. 화면에서 '로그인하기' 버튼을 누르면, 카카오 로그인 화면으로 넘어간다.<br>회원가입을 한 적이 없는 사용자라면, 카카오 회원가입 후, 서비스 내 회원가입 페이지로 넘어가게 되고, 이미 가입된 사용자라면, 로그인 후, 홈 화면으로 넘어가게 된다.<br><br><b>[홈 화면]</b><br>'사진 업로드 버튼', 'AI의 today’s 옷 추천 버튼'과 '달력'이 존재한다. 달력은 가입한 날부터 오늘까지 보이며, 게시글을 올린 날의 콜라주가 달력에 보여진다. 콜라주를 누르면, 해당 게시글로 넘어간다. <br>헤더의 WOT로고를 누르면, 홈 화면으로 이동한다.<br><br><b>[사진 업로드 화면]</b><br>홈 화면에서 '사진 업로드 버튼'을 누르면, 해당 페이지로 이동한다. 'AI의 today's 옷 추천'기능을 이용하기 위해 이미지를 업로드하는 페이지이다.<br><b><br>2.AI의 today's 옷추천 화면, 게시글 업로드 화면</b><br>![git2](https://github.com/user-attachments/assets/d8cae396-eb60-491a-8448-a7edc8c5b3eb)<br><b>[today's 옷추천 화면]</b><br>업로드한 이미지가 총 50장이 넘은 후부터 사용 가능한 기능이다. 맞춤형 AI를 통해, 매일 자신의 체질(ex. 추위를 많이 탐)과 오늘의 날씨에 맞는 유저의 옷을 추천한다. 콜라주 이미지 형태로 추천한다.<br><br><b>[게시글 업로드 화면]</b><br>커뮤니티 페이지에 있는 '글 올리기' float 버튼을 누르면 열리는 모달창이다. 업로드하고자 하는 이미지를 넣으면, 해당 이미지를 이용한 콜라주 이미지와 같이 게시글이 업로드 된다. 콜라주 이미지는 저장이 가능하다.<br><br><b>3. 커뮤니티 화면</b><br>![git3](https://github.com/user-attachments/assets/f3841e77-4e05-40eb-9e55-2b9c9c23f45c)<br><b>[커뮤니티 화면]</b><br>친한 친구 20명과 함께 하는 폐쇄형 SNS이다. 커뮤니티 화면에서는 일주일 내에 올라온 게시글들을 볼 수 있으며, 각 게시글을 누르면, 게시글의 detail 화면으로 넘어간다. 댓글, 좋아요 기능이 있다.|
| (2) 전체 시스템 구성 |<h3>[전체 SW 시스템 구조도]</h3><br>![wot_시스템구조도 drawio](https://github.com/user-attachments/assets/811c47c1-ab31-48ff-9ed4-71c1e70eb201)<br><br><b>[AI]</b><br>- Grounded FastSAM 모델을 사용해 이미지에서 상의, 하의, 신발 객체를 추출하고 각각 마스크 처리한 후 segment된 image를 S3에 저장한다. <br>- Meteostat API를 통해 이미지 메타데이터에 포함된 날짜의 날씨 정보를 불러오고, 사용자의 현재 날씨와 과거 날씨 간 유사도를 계산해 가장 유사한 조건에서 착용된 옷을 추천하는 방식으로 협업 필터링 추천 시스템을 구현한다.<br>- 모든 기능은 API 형태로 구현해 Docker 이미지로 만든 후 Railway로 배포한다.<br><br> <b>[백엔드]</b><br> Java언어 기반의 SpringBoot를 사용하여 서버 개발을 했으며 데이터베이스는 MySQL 기반이다. 서버 배포는 AWS의 EC2를 사용했고, 이미지 저장은 AWS S3를, 데이터베이스는 AWS RDS를 사용했다. CI/CD는 Docker에 이미지를 업로드 해 배포하고 GithubAction으로 관리한다. <br><br><b>[프론트엔드]</b><br> Typescript 언어와 React 라이브러리를 이용하여 웹앱 형태의 서비스를 개발한다. 클라이언트 배포는 Vercel을 이용하여 배포를 자동화했다.|
| (3) 주요엔진 및 기능 설계 | - <b>Grounded-SAM</b>: 사용자가 올린 OOTD를 segmentation 할 때 사용한다. image segmentation의 SOTA 모델인 Segment Anything과 Grounding DINO를 결합하여 만든 모델 텍스트 프롬프트가 있어, 감지하고 싶은 물체를 입력하면 사각형으로 boundary를 잡고 그 안에서 pixel segmentation이 이루어진다. <br> (https://github.com/IDEA-Research/Grounded-Segment-Anything)<br><br> - <b>Inpaint Anything</b>: segment한 이미지 중 잘린 부분을 복원할 때 사용한다. Inpaint Anything은 segment할 때 사용한 모델인 Segment Anything을 기반으로 해 segmentation과 inpainting을 동시에 처리할 예정이다.<br> (https://github.com/geekyutao/Inpaint-Anything)<br><br> - <b>meteostat</b>: 사용자의 OOTD 이미지의 날씨데이터와 AI의 today's 옷추천 기능에서 사용되는 오늘의 날씨데이터를 불러올 때 사용한다. <br><br>- <b>docker</b>: AI와 서버 API의 배포를 돕기 위해 사용된다. 각 실행파일과 설정 값 등을 도커이미지로 만들어 배포한다.<br>
| (4) 주요 기능의 구현 | <h3>두 기능 공통 구현 부분</h3><br><b>image sementation</b><br>![image](https://github.com/user-attachments/assets/f42e395f-d6cc-4727-86bb-b710b93275c9)<br><br>- 콜라주를 만들기 위해서 감지한 물체가 있는 부분만 크롭해서 저장해야하는데, 이 때 Grounded SAM 모델을 사용하면 boundary를 잡았던 사각형 부분만 크롭하여 저장하면 되기 때문에 이러한 간편성과 뛰어난 성능을 생각해 Grounded SAM 모델을 택해 세그먼트를 진행했다.<br><br><b>inpainting</b><br>![image (1)](https://github.com/user-attachments/assets/a011b130-693e-4528-8c79-c3d451d8f46a)<br>- OOTD 사진에서 상의, 하의, 신발을 픽셀 단위로 분리하여 추출하면 일부가 잘린 형태가 될 가능성이 있다. 불완전한 옷 이미지를 콜라주에 사용하면 추천 결과에서 옷의 형태를 명확히 인식하기 어렵고, 디자인적으로도 완성도가 떨어지는 문제가 생긴다.<br>- 이를 해결하기 위해 inpainting 기법을 사용해 잘린 부분을 자연스럽게 보완한다.<br><br><h3>[기능1) AI의 today's 옷 추천]</h3><br><b>1. 데이터 수집</b><br>- OOTD 사진 메타데이터에서 날짜를 가져와, Meteostat API를 통해 그 날의 날씨 정보를 확보한다. <br>- (segment된 결과 이미지의 path, 날씨) 짝을 만들어 추천시스템의 학습 데이터로 사용한다.<br><br><b>2. 협업 필터링 추천시스템</b><br>![image (2)](https://github.com/user-attachments/assets/6dd3d272-7452-4504-8528-07ae4715b9c6)<br>유사도 측정<br>-사용자의 과거 OOTD 데이터에서 각 착장에 해당하는 날짜의 날씨 정보를 가져온다.<br>-현재 날씨와 가장 유사한 날을 찾고 해당 날짜의 착장 데이터를 추천 후보로 선택한다.<br>추천 제공<br>-유사한 날씨 조건에서 착용한 상의, 하의는 각각 3개씩, 신발은 2개의 아이템을 추천한다.<br><br><h3>[기능2) 룩북 올리기 및 이미지 콜라주화]</h3><br>1. AI에서 segmentation한 이미지를 프론트엔드 단에서 배치하고 <b>HTML5 Canvas API</b>를 사용해 하나의 이미지로 합친다.<br>2. 그 후 이미지를 S3에 저장해 콜라주화된 이미지를 저장 및 확인할 수 있다.
| (5) 기타 | |
